(this["webpackJsonpudemy-graphql-with-react-intro-search-repos"]=this["webpackJsonpudemy-graphql-with-react-intro-search-repos"]||[]).push([[0],{42:function(e,r,t){e.exports=t(88)},47:function(e,r,t){},88:function(e,r,t){"use strict";t.r(r);var n=t(3),a=t.n(n),o=t(33),u=t.n(o),i=(t(47),t(14)),s=t(38),l=t(13),c=t(24),f=t(6),d=t(40),p=t(39),m=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_GITHUB_TOKEN,b=new f.a((function(e,r){return e.setContext({headers:{Authorization:"Bearer ".concat(m)}}),r(e)})),v=new d.a({uri:"https://api.github.com/graphql"}),g=f.a.from([b,v]),h=new c.ApolloClient({link:g,cache:new p.a}),y=t(9),E=t(10),S=t.n(E);function q(){var e=Object(y.a)(['\n  query me {\n    user(login: "three4c") {\n      name\n      avatarUrl\n    }\n  }\n']);return q=function(){return e},e}function O(){var e=Object(y.a)(["\n  mutation removeStar($input: RemoveStarInput!) {\n    removeStar(input: $input) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return O=function(){return e},e}function C(){var e=Object(y.a)(["\n  mutation addStar($input: AddStarInput!) {\n    addStar(input: $input) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return C=function(){return e},e}function w(){var e=Object(y.a)(["\n  query searchRepositories(\n    $first: Int\n    $after: String\n    $last: Int\n    $before: String\n    $query: String!\n  ) {\n    search(\n      first: $first\n      after: $after\n      last: $last\n      before: $before\n      query: $query\n      type: REPOSITORY\n    ) {\n      repositoryCount\n      pageInfo {\n        endCursor\n        hasNextPage\n        hasPreviousPage\n        startCursor\n      }\n      edges {\n        cursor\n        node {\n          ... on Repository {\n            id\n            name\n            url\n            stargazers {\n              totalCount\n            }\n            viewerHasStarred\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}var I=S()(w()),R=S()(C()),$=S()(O()),j=(S()(q()),function(e){var r=e.node,t=e.query,n=e.first,o=e.last,u=e.after,i=e.before,s=e.node.stargazers.totalCount,c=r.viewerHasStarred,f=1===s?"1 star":"".concat(s," starts"),d=function(e){var s=e.addOrRemoveStar;return a.a.createElement("button",{onClick:function(){return s({variables:{input:{starrableId:r.id}},update:function(e,a){var s=a.data,l=s.addStar,c=s.removeStar,f=(l||c).starrable,d=e.readQuery({query:I,variables:{query:t,first:n,last:o,after:u,before:i}}),p=d.search.edges.map((function(e){if(e.node.id===r.id){var t=e.node.stargazers.totalCount+(f.viewerHasStarred?1:-1);e.node.stargazers.totalCount=t}return e}));d.search.edges=p,e.writeQuery({query:I,data:d})}})}},f," | ",c?"starred":"-")};return a.a.createElement(l.Mutation,{mutation:c?$:R},(function(e){return a.a.createElement(d,{addOrRemoveStar:e})}))}),P={first:5,after:null,last:null,before:null,query:""},k=function(){var e=Object(n.useState)(P),r=Object(s.a)(e,2),t=r[0],o=r[1],u=t.query,c=t.first,f=t.last,d=t.before,p=t.after,m=Object(n.useRef)(null);return a.a.createElement(l.ApolloProvider,{client:h},a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o(Object(i.a)({},t,{query:m.current.value}))}},a.a.createElement("input",{ref:m}),a.a.createElement("input",{type:"submit",value:"Submit"})),a.a.createElement(l.Query,{query:I,variables:{query:u,first:c,last:f,before:d,after:p}},(function(e){var r=e.loading,n=e.error,s=e.data;if(r)return"Loading...";if(n)return"Error! ".concat(n.message);var l=s.search,m=l.repositoryCount,b=1===m?"Repository":"Repositories",v="GitHub Repositories Search Results - ".concat(m," ").concat(b);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,v),a.a.createElement("ul",null,l.edges.map((function(e){var r=e.node;return a.a.createElement("li",{key:r.id},a.a.createElement("a",{href:r.url,target:"_blank",rel:"noopener noreferrer"},r.name),"\xa0",a.a.createElement(j,Object.assign({node:r},{query:u,first:c,last:f,after:p,before:d})))}))),!0===l.pageInfo.hasPreviousPage?a.a.createElement("button",{onClick:function(){return function(e){o(Object(i.a)({},t,{first:null,after:null,last:5,before:e.pageInfo.startCursor}))}(l)}},"Previous"):null,!0===l.pageInfo.hasNextPage?a.a.createElement("button",{onClick:function(){return function(e){o(Object(i.a)({},t,{first:5,after:e.pageInfo.endCursor,last:null,before:null}))}(l)}},"Next"):null)})))};u.a.render(a.a.createElement(k,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2d8d6e79.chunk.js.map